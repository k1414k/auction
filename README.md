仕様バージョン
NODE VERSION ^24.12.0

git ignoreファイル名
.env.local


ーー
プロジェクト設計のポイント（README向け）

グローバルな状態管理に Zustand を採用
ログインユーザー情報（ニックネーム・残高・ポイントなど）を Zustand に保持。
_app.tsx 内で UserInitializer コンポーネントを配置し、全ページで自動的に API からユーザー情報を取得・初期化。
SPA 的に状態が即反映され、ページ遷移やモーダル表示でも常に最新情報を参照可能。

API 呼び出しと状態同期を統一
nextApi 関数をラップして共通化。fetch / axios の冗長な設定を省略し、型安全な API 呼び出しを実現。
成功時は Zustand に保存、失敗時はエラー処理を統一。

セキュアで拡張性のある Rails バックエンド設計

DeviseTokenAuth を活用し、トークン認証を安全に実装

ユーザー残高・ポイント更新は with_lock でトランザクション制御

API は type と amount による汎用的な更新設計で、将来的なフィールド追加にも柔軟

フロント・バックエンドで型安全性と再利用性を重視

TypeScript で API レスポンス型やフォーム型を定義

formatNumber など共通ユーティリティを utils に配置し、複数ページで再利用

その他の良い設計例

モーダルやフォームの状態管理をコンポーネント単位で完結

ニックネーム・パスワード変更やウォレット更新など、API 呼び出しと状態更新を明確に分離

Rails 側のモデルにバリデーションやトランザクション制御を集中させ、コントローラーは API の操作に専念