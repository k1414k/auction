class FavoritesController < ApplicationController
  before_action :authenticate_user!
  before_action :set_item

  def create
    current_user.favorites.create!(item: @item)
    render json: { favorited: true }
  end

  def destroy
    current_user.favorites.find_by(item: @item)&.destroy
    render json: { favorited: false }
  end

  private

  def set_item
    @item = Item.find(params[:item_id])
  end
end

ğŸ‘‰ User å´ã‹ã‚‰ exists?

current_user.favorites.exists?(item_id: item.id)


UX çš„ã«ä¸€ç•ªå¤šã„

â¤ï¸ å¡—ã‚‹ / å¡—ã‚‰ãªã„

toggle favorite

âœ… ã“ã‚ŒãŒåŸºæœ¬å½¢

3ï¸âƒ£ ã‚¢ã‚¤ãƒ†ãƒ è¦–ç‚¹ã¯ã„ã¤ä½¿ã†ï¼Ÿ
ã€Œã“ã®å•†å“ã¯ã“ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãŠæ°—ã«å…¥ã‚Šã•ã‚Œã¦ã‚‹ï¼Ÿã€
item.favorites.exists?(user_id: current_user.id)


è«–ç†çš„ã«ã¯åŒã˜ã€‚
çµæœã‚‚åŒã˜ã€‚

ã§ã‚‚ğŸ‘‡


â‘¡ axios instance ã« interceptor ã§ headers ã‚’ä»•è¾¼ã‚€ï¼ˆæœ€å¼·ï¼‰
api.interceptors.request.use((config) => {
  config.headers['access-token'] = Cookies.get('access-token')
  config.headers['client'] = Cookies.get('client')
  config.headers['uid'] = Cookies.get('uid')
  return config
})


ğŸ‘‰ æ¯å› headers æ›¸ã‹ãªãã¦ã‚ˆããªã‚‹