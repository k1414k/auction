class FavoritesController < ApplicationController
  before_action :authenticate_user!
  before_action :set_item

  def create
    current_user.favorites.create!(item: @item)
    render json: { favorited: true }
  end

  def destroy
    current_user.favorites.find_by(item: @item)&.destroy
    render json: { favorited: false }
  end

  private

  def set_item
    @item = Item.find(params[:item_id])
  end
end

ðŸ‘‰ User å´ã‹ã‚‰ exists?

current_user.favorites.exists?(item_id: item.id)


UX çš„ã«ä¸€ç•ªå¤šã„

â¤ï¸ å¡—ã‚‹ / å¡—ã‚‰ãªã„

toggle favorite

âœ… ã“ã‚ŒãŒåŸºæœ¬å½¢

3ï¸âƒ£ ã‚¢ã‚¤ãƒ†ãƒ è¦–ç‚¹ã¯ã„ã¤ä½¿ã†ï¼Ÿ
ã€Œã“ã®å•†å“ã¯ã“ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãŠæ°—ã«å…¥ã‚Šã•ã‚Œã¦ã‚‹ï¼Ÿã€
item.favorites.exists?(user_id: current_user.id)


è«–ç†çš„ã«ã¯åŒã˜ã€‚
çµæžœã‚‚åŒã˜ã€‚

ã§ã‚‚ðŸ‘‡